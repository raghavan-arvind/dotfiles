#!/bin/bash

if xrandr | rg -q "^DP1 disconnected"; then 
    echo "No external monitor!"
    xrandr --output eDP1 --auto --primary --mode 1920x1080
else 
    if xrandr | rg -q "^eDP1 connected \(" || xrandr | rg -q "^eDP1 connected primary \("; then
        # Main display off
        xrandr --output eDP1 --primary --mode 1920x1080 --output DP1 --off
    else
        # Main display on
        xrandr --output DP1 --primary --mode 1920x1200 --output eDP1 --off
    fi
fi
